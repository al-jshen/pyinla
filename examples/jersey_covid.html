
<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Covid in NJ &#8212; PyINLA</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=a75df0fd"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'examples/jersey_covid';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">PyINLA</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples and Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="hospital.html">Hospitals</a></li>
<li class="toctree-l1"><a class="reference internal" href="drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="gp.html">Gaussian process regression</a></li>
<li class="toctree-l1"><a class="reference internal" href="malaria.html">Malaria</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/al-jshen/pyinla" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/examples/jersey_covid.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Covid in NJ</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="covid-in-nj">
<h1>Covid in NJ<a class="headerlink" href="#covid-in-nj" title="Permalink to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cmocean.cm</span> <span class="k">as</span> <span class="nn">cmo</span>
<span class="kn">import</span> <span class="nn">folium</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">matplotlib.cm</span> <span class="k">as</span> <span class="nn">cm</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Video</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">rgb2hex</span>
<span class="kn">from</span> <span class="nn">pyinla.model</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pyinla.raster</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pyinla.spde</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pyinla.utils</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">tqdm.auto</span> <span class="kn">import</span> <span class="n">tqdm</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./data/jersey_covid_2021-2022.csv&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;2021&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>
<span class="n">population</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./data/njpop.csv&quot;</span><span class="p">)</span>
<span class="n">income</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./data/njincome.csv&quot;</span><span class="p">)</span>
<span class="n">pov</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./data/njpoverty.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">geojson</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&quot;./data/nj_county_boundaries.geojson&quot;</span><span class="p">)</span>
<span class="n">geojson</span> <span class="o">=</span> <span class="n">geojson</span><span class="p">[[</span><span class="s2">&quot;geometry&quot;</span><span class="p">,</span> <span class="s2">&quot;COUNTY&quot;</span><span class="p">,</span> <span class="s2">&quot;FIPSSTCO&quot;</span><span class="p">]]</span>
<span class="n">geojson</span><span class="p">[</span><span class="s2">&quot;fips&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">geojson</span><span class="p">[</span><span class="s2">&quot;FIPSSTCO&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">geojson</span> <span class="o">=</span> <span class="n">geojson</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;FIPSSTCO&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">gdf</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">geojson</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;COUNTY&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">income</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;COUNTY&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pov</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;COUNTY&quot;</span><span class="p">,</span> <span class="s2">&quot;fips&quot;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;fips&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;death_frac&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">deaths</span> <span class="o">/</span> <span class="n">gdf</span><span class="o">.</span><span class="n">cases</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">date</span> <span class="o">==</span> <span class="s2">&quot;2021-01-05&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;deaths&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot: &gt;
</pre></div>
</div>
<img alt="../_images/f2d2a402a00c94f06b39da787309d34f56e1f5f4767cfce00e6499d986cf8af0.png" src="../_images/f2d2a402a00c94f06b39da787309d34f56e1f5f4767cfce00e6499d986cf8af0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">gdf</span><span class="p">)):</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;cases&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;cases&quot;</span><span class="p">][</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">diff</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">gdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">:,</span> <span class="s2">&quot;cases&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">:,</span> <span class="s2">&quot;cases&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;deaths&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;deaths&quot;</span><span class="p">][</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">diff</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">gdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">:,</span> <span class="s2">&quot;deaths&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">:,</span> <span class="s2">&quot;deaths&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">date</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">gdf</span><span class="o">.</span><span class="n">date</span><span class="p">))):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">date</span> <span class="o">==</span> <span class="n">d</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="s2">&quot;death_frac&quot;</span><span class="p">,</span>
        <span class="n">cmap</span><span class="o">=</span><span class="n">cmo</span><span class="o">.</span><span class="n">deep</span><span class="p">,</span>
        <span class="n">legend</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="mf">0.06</span><span class="p">,</span>
        <span class="n">norm</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">0.06</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;./out/njdf-</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s2">.jpg&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "f2593b60997940a0aba72cd64ef4d0e4", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>ffmpeg<span class="w"> </span>-framerate<span class="w"> </span><span class="m">30</span><span class="w"> </span>-pattern_type<span class="w"> </span>glob<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;*.jpg&#39;</span><span class="w"> </span>-c:v<span class="w"> </span>libx264<span class="w"> </span>-pix_fmt<span class="w"> </span>yuv420p<span class="w"> </span>out.mp4
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Video</span><span class="p">(</span><span class="s2">&quot;./out/out.mp4&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><video src="./out/out.mp4" controls  width="500"  height="600">
      Your browser does not support the <code>video</code> element.
    </video></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">counties</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">gdf</span><span class="o">.</span><span class="n">COUNTY</span><span class="p">)</span>
<span class="n">adj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">counties</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">counties</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">counties</span><span class="p">)):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">counties</span><span class="p">)):</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">COUNTY</span> <span class="o">==</span> <span class="n">counties</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
            <span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">touches</span><span class="p">(</span><span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">COUNTY</span> <span class="o">==</span> <span class="n">counties</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">geometry</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="n">adj</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">adj</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">COUNTY</span> <span class="o">==</span> <span class="s2">&quot;MERCER&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
    <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">COUNTY</span> <span class="o">==</span> <span class="s2">&quot;MERCER&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">cases</span><span class="p">)</span>
    <span class="o">/</span> <span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">COUNTY</span> <span class="o">==</span> <span class="s2">&quot;MERCER&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pop2020</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">()[</span><span class="mi">0</span><span class="p">][::</span><span class="mi">100</span><span class="p">]);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/f623334419f59e609074ebb2cf5ef43cb4df30b6b58088f4a4a3b0bb0a504971.png" src="../_images/f623334419f59e609074ebb2cf5ef43cb4df30b6b58088f4a4a3b0bb0a504971.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">county_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">ro</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="s2">&quot;as.factor&quot;</span><span class="p">)(</span><span class="n">gdf</span><span class="o">.</span><span class="n">COUNTY</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="n">county_id_2</span> <span class="o">=</span> <span class="n">county_id</span>
<span class="n">time_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">ro</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="s2">&quot;as.factor&quot;</span><span class="p">)(</span><span class="n">gdf</span><span class="o">.</span><span class="n">date</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">rinla</span><span class="o">.</span><span class="n">inla_read_graph</span><span class="p">(</span><span class="n">adj</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">formula1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">cases ~ f(county_id, model=&quot;bym&quot;, graph=g) + f(time_id, model=&quot;ar1&quot;) + poverty + income</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">formula2</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">cases ~ f(county_id, model=&quot;besag&quot;, graph=g) + f(time_id, model=&quot;rw2&quot;) + poverty + income</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">formula3</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">cases ~ 1 + f(county_id, model=&quot;besag&quot;, graph=g, group=time_id, control.group=list(model=&quot;ar1&quot;)) + </span>
<span class="s2">    poverty + income</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">diffcases</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
    <span class="n">gdf</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;COUNTY&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">cases</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(([</span><span class="mi">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">x</span><span class="p">))))</span>
    <span class="o">.</span><span class="n">values</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">inla</span><span class="p">(</span>
    <span class="n">formula</span><span class="o">=</span><span class="n">formula3</span><span class="p">,</span>
    <span class="n">family</span><span class="o">=</span><span class="s2">&quot;poisson&quot;</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">cases</span><span class="o">=</span><span class="n">diffcases</span><span class="p">,</span>
        <span class="n">county_id</span><span class="o">=</span><span class="n">county_id</span><span class="p">,</span>
        <span class="n">county_id_2</span><span class="o">=</span><span class="n">county_id</span><span class="p">,</span>
        <span class="n">time_id</span><span class="o">=</span><span class="n">time_id</span><span class="p">,</span>
        <span class="n">time_id_2</span><span class="o">=</span><span class="n">time_id</span><span class="p">,</span>
        <span class="n">poverty</span><span class="o">=</span><span class="n">gdf</span><span class="o">.</span><span class="n">poverty2021</span> <span class="o">/</span> <span class="n">gdf</span><span class="o">.</span><span class="n">pop2021</span><span class="p">,</span>
        <span class="n">income</span><span class="o">=</span><span class="n">gdf</span><span class="o">.</span><span class="n">income2021</span> <span class="o">/</span> <span class="mi">1_000</span><span class="p">,</span>
        <span class="n">g</span><span class="o">=</span><span class="n">g</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">E</span><span class="o">=</span><span class="n">gdf</span><span class="o">.</span><span class="n">pop2021</span><span class="p">,</span>
    <span class="n">control_predictor</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">control_compute</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">return_marginals_predictor</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="c1"># control_mode=dict(result=res.result),</span>
<span class="p">)</span><span class="o">.</span><span class="n">improve_hyperpar</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>GMRFLib_2order_approx: rescue NAN/INF values in logl for idx=1824
R[write to console]: Error in inla.inlaprogram.has.crashed() : 
  The inla-program exited with an error. Unless you interupted it yourself, please rerun with verbose=TRUE and check the output carefully.
  If this does not help, please contact the developers at &lt;help@r-inla.org&gt;.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *** inla.core.safe:  inla.program has crashed: rerun to get better initial values. try=1/2 
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>R[write to console]: 
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">RRuntimeError</span><span class="g g-Whitespace">                             </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">617</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">res</span> <span class="o">=</span> <span class="n">inla</span><span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>     <span class="n">formula</span><span class="o">=</span><span class="n">formula3</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="n">family</span><span class="o">=</span><span class="s2">&quot;poisson&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>         <span class="n">cases</span><span class="o">=</span><span class="n">diffcases</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span>         <span class="n">county_id</span><span class="o">=</span><span class="n">county_id</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span>         <span class="n">county_id_2</span><span class="o">=</span><span class="n">county_id</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>         <span class="n">time_id</span><span class="o">=</span><span class="n">time_id</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span>         <span class="n">time_id_2</span><span class="o">=</span><span class="n">time_id</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">10</span>         <span class="n">poverty</span><span class="o">=</span><span class="n">gdf</span><span class="o">.</span><span class="n">poverty2021</span> <span class="o">/</span> <span class="n">gdf</span><span class="o">.</span><span class="n">pop2021</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span>         <span class="n">income</span><span class="o">=</span><span class="n">gdf</span><span class="o">.</span><span class="n">income2021</span> <span class="o">/</span> <span class="mi">1_000</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span>         <span class="n">g</span><span class="o">=</span><span class="n">g</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">13</span>     <span class="p">),</span>
<span class="g g-Whitespace">     </span><span class="mi">14</span>     <span class="n">E</span><span class="o">=</span><span class="n">gdf</span><span class="o">.</span><span class="n">pop2021</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">15</span>     <span class="n">control_predictor</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="g g-Whitespace">     </span><span class="mi">16</span>     <span class="n">control_compute</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">return_marginals_predictor</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="g g-Whitespace">     </span><span class="mi">17</span>     <span class="c1"># control_mode=dict(result=res.result),</span>
<span class="g g-Whitespace">     </span><span class="mi">18</span> <span class="p">)</span><span class="o">.</span><span class="n">improve_hyperpar</span><span class="p">()</span>

<span class="nn">File ~/programs/pyinla/pyinla/model.py:108,</span> in <span class="ni">inla</span><span class="nt">(formula, data, family, quantiles, E, scale, weights, n_trials, control_compute, control_predictor, control_family, control_inla, control_fixed, control_mode, control_expert, control_hazard, control_lincomb, control_update, control_lp_scale, control_pardiso, verbose, only_hyperparam, num_threads, blas_num_threads, keep, working_directory, silent, inla_mode, safe, debug)</span>
<span class="g g-Whitespace">    </span><span class="mi">105</span> <span class="k">if</span> <span class="n">weights</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">106</span>     <span class="n">weights</span> <span class="o">=</span> <span class="n">R_NULL</span>
<span class="ne">--&gt; </span><span class="mi">108</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rinla</span><span class="o">.</span><span class="n">inla</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">109</span>     <span class="n">formula</span><span class="o">=</span><span class="n">ro</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="n">formula</span><span class="p">),</span>
<span class="g g-Whitespace">    </span><span class="mi">110</span>     <span class="n">data</span><span class="o">=</span><span class="n">convert_py2r</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
<span class="g g-Whitespace">    </span><span class="mi">111</span>     <span class="n">family</span><span class="o">=</span><span class="n">family</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">112</span>     <span class="n">quantiles</span><span class="o">=</span><span class="n">quantiles</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">113</span>     <span class="n">E</span><span class="o">=</span><span class="n">E</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">114</span>     <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">115</span>     <span class="n">Ntrials</span><span class="o">=</span><span class="n">n_trials</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">116</span>     <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">117</span>     <span class="o">**</span><span class="n">control_params</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">118</span>     <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">119</span>     <span class="n">only_hyperparam</span><span class="o">=</span><span class="n">only_hyperparam</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">120</span>     <span class="n">num_threads</span><span class="o">=</span><span class="n">num_threads</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">121</span>     <span class="n">blas_num_threads</span><span class="o">=</span><span class="n">blas_num_threads</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">122</span>     <span class="n">keep</span><span class="o">=</span><span class="n">keep</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">123</span>     <span class="n">working_directory</span><span class="o">=</span><span class="n">working_directory</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">124</span>     <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">125</span>     <span class="n">inla_mode</span><span class="o">=</span><span class="n">inla_mode</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">126</span>     <span class="n">safe</span><span class="o">=</span><span class="n">safe</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">127</span>     <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">128</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">130</span> <span class="k">return</span> <span class="n">Result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

<span class="nn">File /opt/homebrew/Caskroom/miniconda/base/envs/main/lib/python3.10/site-packages/rpy2/robjects/functions.py:204,</span> in <span class="ni">SignatureTranslatedFunction.__call__</span><span class="nt">(self, *args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">202</span>         <span class="n">v</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">203</span>         <span class="n">kwargs</span><span class="p">[</span><span class="n">r_k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
<span class="ne">--&gt; </span><span class="mi">204</span> <span class="k">return</span> <span class="p">(</span><span class="nb">super</span><span class="p">(</span><span class="n">SignatureTranslatedFunction</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">205</span>         <span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>

<span class="nn">File /opt/homebrew/Caskroom/miniconda/base/envs/main/lib/python3.10/site-packages/rpy2/robjects/functions.py:127,</span> in <span class="ni">Function.__call__</span><span class="nt">(self, *args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">125</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">126</span>         <span class="n">new_kwargs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">py2rpy</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">127</span> <span class="n">res</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">Function</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="o">*</span><span class="n">new_args</span><span class="p">,</span> <span class="o">**</span><span class="n">new_kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">128</span> <span class="n">res</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">rpy2py</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">129</span> <span class="k">return</span> <span class="n">res</span>

<span class="nn">File /opt/homebrew/Caskroom/miniconda/base/envs/main/lib/python3.10/site-packages/rpy2/rinterface_lib/conversion.py:45,</span> in <span class="ni">_cdata_res_to_rinterface.&lt;locals&gt;._</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">44</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="ne">---&gt; </span><span class="mi">45</span>     <span class="n">cdata</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">46</span>     <span class="c1"># TODO: test cdata is of the expected CType</span>
<span class="g g-Whitespace">     </span><span class="mi">47</span>     <span class="k">return</span> <span class="n">_cdata_to_rinterface</span><span class="p">(</span><span class="n">cdata</span><span class="p">)</span>

<span class="nn">File /opt/homebrew/Caskroom/miniconda/base/envs/main/lib/python3.10/site-packages/rpy2/rinterface.py:815,</span> in <span class="ni">SexpClosure.__call__</span><span class="nt">(self, *args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">808</span>     <span class="n">res</span> <span class="o">=</span> <span class="n">rmemory</span><span class="o">.</span><span class="n">protect</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">809</span>         <span class="n">openrlib</span><span class="o">.</span><span class="n">rlib</span><span class="o">.</span><span class="n">R_tryEval</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">810</span>             <span class="n">call_r</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">811</span>             <span class="n">call_context</span><span class="o">.</span><span class="n">__sexp__</span><span class="o">.</span><span class="n">_cdata</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">812</span>             <span class="n">error_occured</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">813</span>     <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">814</span>     <span class="k">if</span> <span class="n">error_occured</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
<span class="ne">--&gt; </span><span class="mi">815</span>         <span class="k">raise</span> <span class="n">embedded</span><span class="o">.</span><span class="n">RRuntimeError</span><span class="p">(</span><span class="n">_rinterface</span><span class="o">.</span><span class="n">_geterrmessage</span><span class="p">())</span>
<span class="g g-Whitespace">    </span><span class="mi">816</span> <span class="k">return</span> <span class="n">res</span>

<span class="ne">RRuntimeError</span>: Error in inla.inlaprogram.has.crashed() : 
  <span class="n">The</span> <span class="n">inla</span><span class="o">-</span><span class="n">program</span> <span class="n">exited</span> <span class="k">with</span> <span class="n">an</span> <span class="n">error</span><span class="o">.</span> <span class="n">Unless</span> <span class="n">you</span> <span class="n">interupted</span> <span class="n">it</span> <span class="n">yourself</span><span class="p">,</span> <span class="n">please</span> <span class="n">rerun</span> <span class="k">with</span> <span class="n">verbose</span><span class="o">=</span><span class="n">TRUE</span> <span class="ow">and</span> <span class="n">check</span> <span class="n">the</span> <span class="n">output</span> <span class="n">carefully</span><span class="o">.</span>
  <span class="n">If</span> <span class="n">this</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">help</span><span class="p">,</span> <span class="n">please</span> <span class="n">contact</span> <span class="n">the</span> <span class="n">developers</span> <span class="n">at</span> <span class="o">&lt;</span><span class="n">help</span><span class="nd">@r</span><span class="o">-</span><span class="n">inla</span><span class="o">.</span><span class="n">org</span><span class="o">&gt;.</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Time used:
     = 1.9,  = 0.362,  = 0.141,  = 2.41 
Fixed effects:
               mean    sd 0.025quant 0.5quant 0.975quant    mode kld
(Intercept) -11.797 1.208    -14.180  -11.799     -9.400 -11.803   0
poverty      10.789 4.926      1.002   10.801     20.502  10.823   0
income        0.028 0.011      0.007    0.028      0.049   0.028   0

Random effects:
  Name	  Model
    county_id BYM model
   time_id AR1 model

Model hyperparameters:
                                                mean       sd 0.025quant
Precision for county_id (iid component)     3195.291 4576.737    230.674
Precision for county_id (spatial component)    1.212    0.387      0.599
Precision for time_id                          0.602    0.147      0.351
Rho for time_id                                0.902    0.024      0.849
                                            0.5quant 0.975quant    mode
Precision for county_id (iid component)     1829.171   1.45e+04 600.523
Precision for county_id (spatial component)    1.165   2.10e+00   1.074
Precision for time_id                          0.591   9.23e-01   0.571
Rho for time_id                                0.904   9.44e-01   0.907

Marginal log-Likelihood:  -71697.73 
 is computed 
Posterior summaries for the linear predictor and the fitted values are computed
(Posterior marginals needs also &#39;control.compute=list(return.marginals.predictor=TRUE)&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span><span class="o">.</span><span class="n">get_marginal_type</span><span class="p">(</span><span class="s2">&quot;fixed&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_marginal</span><span class="p">(</span><span class="s2">&quot;poverty&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">spline</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot: &gt;
</pre></div>
</div>
<img alt="../_images/bb5989e78a087a092848b5d27df8569a617426fefa6b162409a8218af99b47b4.png" src="../_images/bb5989e78a087a092848b5d27df8569a617426fefa6b162409a8218af99b47b4.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rr_mode</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">get_summary</span><span class="p">(</span><span class="s2">&quot;fitted.values&quot;</span><span class="p">)[</span><span class="s2">&quot;mode&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gdf</span><span class="p">[::</span><span class="mi">365</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">rr_mode</span><span class="p">[::</span><span class="mi">365</span><span class="p">]</span> <span class="o">*</span> <span class="n">gdf</span><span class="o">.</span><span class="n">pop2021</span><span class="p">[::</span><span class="mi">365</span><span class="p">]),</span>
    <span class="n">legend</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot: &gt;
</pre></div>
</div>
<img alt="../_images/d00e76d09a13768c77f9fa10e21b022dab2edb451ee568aa1a092acb44b97933.png" src="../_images/d00e76d09a13768c77f9fa10e21b022dab2edb451ee568aa1a092acb44b97933.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">21</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">gdf</span><span class="o">.</span><span class="n">date</span><span class="p">[:</span><span class="mi">365</span><span class="p">],</span>
        <span class="n">rr_mode</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">365</span> <span class="p">:</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">365</span><span class="p">]</span> <span class="o">*</span> <span class="n">gdf</span><span class="o">.</span><span class="n">pop2021</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">365</span> <span class="p">:</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">365</span><span class="p">]</span>
        <span class="o">-</span> <span class="n">diffcases</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">365</span> <span class="p">:</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">365</span><span class="p">],</span>
    <span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">()[</span><span class="mi">0</span><span class="p">][::</span><span class="mi">100</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">700</span><span class="p">,</span> <span class="mi">700</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(-700.0, 700.0)
</pre></div>
</div>
<img alt="../_images/5872974b5a6f031dd8ceae7fb9940e60fa37b5d040d3de7a2c208272e3e3d871.png" src="../_images/5872974b5a6f031dd8ceae7fb9940e60fa37b5d040d3de7a2c208272e3e3d871.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">min</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">rr_mode</span><span class="p">[:]</span> <span class="o">*</span> <span class="n">gdf</span><span class="o">.</span><span class="n">pop2021</span><span class="p">[:]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-2.1285875172746276
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">rr_mode</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">]</span> <span class="o">*</span> <span class="n">gdf</span><span class="o">.</span><span class="n">pop2021</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">],</span>
    <span class="n">legend</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="c1"># norm=plt.Normalize(-2.1, 8.5),</span>
    <span class="n">cmap</span><span class="o">=</span><span class="n">cmo</span><span class="o">.</span><span class="n">deep</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/d294e04c799aeb7fc71809054405d05d2ec6bc36af0ae038648a18813d680b76.png" src="../_images/d294e04c799aeb7fc71809054405d05d2ec6bc36af0ae038648a18813d680b76.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">364</span><span class="p">)):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">rr_mode</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">]</span> <span class="o">*</span> <span class="n">gdf</span><span class="o">.</span><span class="n">pop2021</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">],</span>
        <span class="n">legend</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">norm</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">500</span><span class="p">),</span>
        <span class="n">cmap</span><span class="o">=</span><span class="n">cmo</span><span class="o">.</span><span class="n">deep</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">gdf</span><span class="o">.</span><span class="n">date</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;./out/inlapred-</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s2">.jpg&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "dfe1d5eceeae4ea2a89e3e98d70b43f6", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>ffmpeg<span class="w"> </span>-y<span class="w"> </span>-framerate<span class="w"> </span><span class="m">30</span><span class="w"> </span>-pattern_type<span class="w"> </span>glob<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;out/inlapred*.jpg&#39;</span><span class="w"> </span>-c:v<span class="w"> </span>libx264<span class="w"> </span>-pix_fmt<span class="w"> </span>yuv420p<span class="w"> </span>out/inlapred.mp4
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ffmpeg version 5.1.2 Copyright (c) 2000-2022 the FFmpeg developers
  built with Apple clang version 14.0.0 (clang-1400.0.29.202)
  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/5.1.2_6 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-neon
  libavutil      57. 28.100 / 57. 28.100
  libavcodec     59. 37.100 / 59. 37.100
  libavformat    59. 27.100 / 59. 27.100
  libavdevice    59.  7.100 / 59.  7.100
  libavfilter     8. 44.100 /  8. 44.100
  libswscale      6.  7.100 /  6.  7.100
  libswresample   4.  7.100 /  4.  7.100
  libpostproc    56.  6.100 / 56.  6.100
Input #0, image2, from &#39;out/inlapred*.jpg&#39;:
  Duration: 00:00:12.13, start: 0.000000, bitrate: N/A
  Stream #0:0: Video: mjpeg (Baseline), yuvj420p(pc, bt470bg/unknown/unknown), 1920x1440 [SAR 300:300 DAR 4:3], 30 fps, 30 tbr, 30 tbn
Stream mapping:
  Stream #0:0 -&gt; #0:0 (mjpeg (native) -&gt; h264 (libx264))
Press [q] to stop, [?] for help
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x120008000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x120018000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x120028000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x120038000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x120048000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x120058000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x120068000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x120078000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x120088000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x120098000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x1200a8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128008000] [swscaler @ 0x128018000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128008000] [swscaler @ 0x128028000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128008000] [swscaler @ 0x128038000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128008000] [swscaler @ 0x128048000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128008000] [swscaler @ 0x128058000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128008000] [swscaler @ 0x128068000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128008000] [swscaler @ 0x128078000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128008000] [swscaler @ 0x128088000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128008000] [swscaler @ 0x128098000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128008000] [swscaler @ 0x1280a8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x128008000] [swscaler @ 0x1280b8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110008000] [swscaler @ 0x110018000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110008000] [swscaler @ 0x110028000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110008000] [swscaler @ 0x110038000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110008000] [swscaler @ 0x110048000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110008000] [swscaler @ 0x110058000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110008000] [swscaler @ 0x110068000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110008000] [swscaler @ 0x110078000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110008000] [swscaler @ 0x110088000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110008000] [swscaler @ 0x110098000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110008000] [swscaler @ 0x1100a8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x110008000] [swscaler @ 0x130008000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x148008000] [swscaler @ 0x140a48000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x148008000] [swscaler @ 0x140a58000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x148008000] [swscaler @ 0x140a68000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x148008000] [swscaler @ 0x140a78000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x148008000] [swscaler @ 0x140a88000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x148008000] [swscaler @ 0x140a98000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x148008000] [swscaler @ 0x140aa8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x148008000] [swscaler @ 0x140ab8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x148008000] [swscaler @ 0x140ac8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x148008000] [swscaler @ 0x140ad8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x148008000] [swscaler @ 0x140ae8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>using SAR=1/1
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>using cpu capabilities: ARMv8 NEON
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>profile High, level 5.0, 4:2:0, 8-bit
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>264 - core 164 r3095 baee400 - H.264/MPEG-4 AVC codec - Copyleft 2003-2022 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=15 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to &#39;out/inlapred.mp4&#39;:
  Metadata:
    encoder         : Lavf59.27.100
  Stream #0:0: Video: h264 (avc1 / 0x31637661), yuv420p(tv, bt470bg/unknown/unknown, progressive), 1920x1440 [SAR 1:1 DAR 4:3], q=2-31, 30 fps, 15360 tbn
    Metadata:
      encoder         : Lavc59.37.100 libx264
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
frame=  364 fps=177 q=-1.0 Lsize=    1122kB time=00:00:12.03 bitrate= 764.0kbits/s speed=5.86x    
video:1118kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.406426%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>frame I:2     Avg QP:21.34  size: 17144
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>frame P:201   Avg QP:24.55  size:  4061
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>frame B:161   Avg QP:21.75  size:  1823
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>consecutive B-frames: 28.0% 33.5% 16.5% 22.0%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>mb I  I16..4: 10.9% 86.7%  2.4%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>mb P  I16..4:  0.9%  7.3%  0.2%  P16..4:  3.1%  0.2%  0.3%  0.0%  0.0%    skip:88.1%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>mb B  I16..4:  2.7%  1.5%  0.0%  B16..8:  1.7%  0.1%  0.0%  direct: 1.1%  skip:92.8%  L0:57.3% L1:38.6% BI: 4.1%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>8x8 transform intra:73.2% inter:80.4%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>coded y,uvDC,uvAC intra: 4.6% 12.1% 4.5% inter: 1.2% 1.9% 0.1%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>i16 v,h,dc,p: 76% 18%  6%  0%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 43% 11% 42%  1%  1%  1%  1%  0%  0%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 43% 16% 22%  4%  3%  3%  3%  4%  1%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>i8c dc,h,v,p: 75% 11% 13%  1%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>Weighted P-Frames: Y:14.9% UV:6.5%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>ref P L0: 27.4% 12.2% 34.7% 22.5%  3.2%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>ref B L0: 66.1% 25.1%  8.8%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>ref B L1: 92.6%  7.4%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x13d905ff0] </span>kb/s:754.23
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Video</span><span class="p">(</span><span class="s2">&quot;./out/inlapred.mp4&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><video src="./out/inlapred.mp4" controls  width="500"  height="600">
      Your browser does not support the <code>video</code> element.
    </video></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">364</span><span class="p">)):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="p">(</span><span class="n">rr_mode</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">]</span> <span class="o">*</span> <span class="n">gdf</span><span class="o">.</span><span class="n">pop2021</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">]</span> <span class="o">-</span> <span class="n">diffcases</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">])</span> <span class="o">/</span> <span class="n">diffcases</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">365</span><span class="p">],</span>
        <span class="n">legend</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">norm</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span>
        <span class="n">vmin</span><span class="o">=-</span><span class="mf">0.1</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
        <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;RdBu&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">gdf</span><span class="o">.</span><span class="n">date</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;./out/inlares-</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s2">.jpg&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "db2e1251bfa64d088ad8e21949fa6c05", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>ffmpeg<span class="w"> </span>-y<span class="w"> </span>-framerate<span class="w"> </span><span class="m">30</span><span class="w"> </span>-pattern_type<span class="w"> </span>glob<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;out/inlares*.jpg&#39;</span><span class="w"> </span>-c:v<span class="w"> </span>libx264<span class="w"> </span>-pix_fmt<span class="w"> </span>yuv420p<span class="w"> </span>out/inlares.mp4
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ffmpeg version 5.1.2 Copyright (c) 2000-2022 the FFmpeg developers
  built with Apple clang version 14.0.0 (clang-1400.0.29.202)
  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/5.1.2_6 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-neon
  libavutil      57. 28.100 / 57. 28.100
  libavcodec     59. 37.100 / 59. 37.100
  libavformat    59. 27.100 / 59. 27.100
  libavdevice    59.  7.100 / 59.  7.100
  libavfilter     8. 44.100 /  8. 44.100
  libswscale      6.  7.100 /  6.  7.100
  libswresample   4.  7.100 /  4.  7.100
  libpostproc    56.  6.100 / 56.  6.100
Input #0, image2, from &#39;out/inlares*.jpg&#39;:
  Duration: 00:00:12.13, start: 0.000000, bitrate: N/A
  Stream #0:0: Video: mjpeg (Baseline), yuvj420p(pc, bt470bg/unknown/unknown), 1920x1440 [SAR 300:300 DAR 4:3], 30 fps, 30 tbr, 30 tbn
Stream mapping:
  Stream #0:0 -&gt; #0:0 (mjpeg (native) -&gt; h264 (libx264))
Press [q] to stop, [?] for help
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x108008000] [swscaler @ 0x108018000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x108008000] [swscaler @ 0x108028000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x108008000] [swscaler @ 0x108038000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x108008000] [swscaler @ 0x108048000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x108008000] [swscaler @ 0x108058000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x108008000] [swscaler @ 0x108068000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x108008000] [swscaler @ 0x108078000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x108008000] [swscaler @ 0x108088000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x108008000] [swscaler @ 0x108098000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x108008000] [swscaler @ 0x1080a8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x108008000] [swscaler @ 0x1080b8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x118478000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x118488000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x118498000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x1184a8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x1184b8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x1184c8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x1184d8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x1184e8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x1184f8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x118508000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x118518000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x128530000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x128540000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x128020000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x128550000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x128560000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x128570000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x128580000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x128590000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x1285a0000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x1285b0000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x118468000] [swscaler @ 0x1285c0000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x108008000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x108018000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x108028000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x108038000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x108048000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x108058000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x108068000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x108078000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x108088000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x108098000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C153 -Color-C153-BGC0">[swscaler @ 0x130008000] [swscaler @ 0x1080a8000] </span><span class=" -Color -Color-C226 -Color-C226-BGC0">deprecated pixel format used, make sure you did set range correctly</span>
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>using SAR=1/1
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>using cpu capabilities: ARMv8 NEON
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>profile High, level 5.0, 4:2:0, 8-bit
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>264 - core 164 r3095 baee400 - H.264/MPEG-4 AVC codec - Copyleft 2003-2022 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=15 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to &#39;out/inlares.mp4&#39;:
  Metadata:
    encoder         : Lavf59.27.100
  Stream #0:0: Video: h264 (avc1 / 0x31637661), yuv420p(tv, bt470bg/unknown/unknown, progressive), 1920x1440 [SAR 1:1 DAR 4:3], q=2-31, 30 fps, 15360 tbn
    Metadata:
      encoder         : Lavc59.37.100 libx264
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
frame=  364 fps=149 q=-1.0 Lsize=    2040kB time=00:00:12.03 bitrate=1388.5kbits/s speed=4.92x    
video:2036kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.170171%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>frame I:2     Avg QP:22.20  size: 25066
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>frame P:300   Avg QP:27.21  size:  5946
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>frame B:62    Avg QP:27.52  size:  4038
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>consecutive B-frames: 68.7% 24.7%  3.3%  3.3%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>mb I  I16..4: 17.1% 79.1%  3.9%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>mb P  I16..4:  0.4%  4.3%  0.6%  P16..4:  1.8%  0.2%  0.2%  0.0%  0.0%    skip:92.4%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>mb B  I16..4:  0.8%  1.6%  0.3%  B16..8:  2.4%  0.2%  0.1%  direct: 0.3%  skip:94.2%  L0:54.6% L1:43.9% BI: 1.5%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>8x8 transform intra:78.3% inter:66.1%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>coded y,uvDC,uvAC intra: 12.7% 23.2% 17.1% inter: 0.6% 0.9% 0.7%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>i16 v,h,dc,p: 57% 27% 15%  0%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 40% 13% 40%  2%  1%  1%  1%  1%  1%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 35% 18% 25%  5%  4%  4%  4%  4%  2%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>i8c dc,h,v,p: 70% 13% 15%  2%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>Weighted P-Frames: Y:0.0% UV:0.0%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>ref P L0: 28.0%  3.9% 43.6% 24.5%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>ref B L0: 57.7% 39.9%  2.3%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>ref B L1: 98.9%  1.1%
<span class=" -Color -Color-C51 -Color-C51-BGC0">[libx264 @ 0x122005ff0] </span>kb/s:1374.25
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Video</span><span class="p">(</span><span class="s2">&quot;./out/inlares.mp4&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><video src="./out/inlares.mp4" controls  width="500"  height="600">
      Your browser does not support the <code>video</code> element.
    </video></div></div>
</div>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jeff Shen
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022, Jeff Shen.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>